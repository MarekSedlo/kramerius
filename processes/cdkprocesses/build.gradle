apply plugin: 'application'
apply plugin: 'java'


// TODO: Do it as a separate project

/*
application {
    mainClassName = "cz.incad.kramerius.services.ParallelMigrateSolrIndexImpl"
}*/

mainClassName = "cz.incad.kramerius.services.ParallelProcessImpl"

dependencies {
    //compile project(':security-core')
    //compile project(':fedora-api')
    compile project(':shared:common')
    compile project(':processes:indexer')
    compile project(':bridge')



}


tasks.withType(CreateStartScripts).each { task ->
    task.doLast {
        task.windowsScript.write task.windowsScript.text.replaceFirst(/(set CLASSPATH=%APP_HOME%\\lib\\).*/, { "${it[1]}*" })
        task.unixScript.write task.unixScript.text.replaceFirst(/(CLASSPATH=.APP_HOME\/lib\/).*/, { "CLASSPATH=\$(echo \$APP_HOME/lib/*.jar | tr ' ' ':')" })
    }
}